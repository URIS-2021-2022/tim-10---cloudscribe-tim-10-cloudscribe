$(function(){function a(a){switch(a.type){case"image/jpeg":case"image/jpg":case"image/gif":case"image/png":case"image/svg+xml":return!0}return!1}var b=$("textarea[data-markdown-unobtrusive]");b&&b.each(function(b,c){var d={};d.element=c,d.autoDownloadFontAwesome=$(c).data("markdown-autoDownloadFontAwesome");var e={};e.enabled=$(c).data("markdown-autosave")||"false",e.uniqueId=$(c).data("markdown-contentid"),d.autosave=e,d.forceSync=$(c).data("markdown-forceSync")||"false",d.indentWithTabs=$(c).data("markdown-indentWithTabs")||"true",d.spellChecker=$(c).data("markdown-spellChecker")||"true";var f=$(c).data("markdown-dropfileuploadurl"),g=$(c).data("markdown-filebrowseurl"),h=$(c).data("markdown-filemodalid"),i=$('[name="__RequestVerificationToken"]:first').val(),j=new SimpleMDE(d),k=j.toolbar[9];k&&g&&h&&(k.action=function(a){window.FileSelectCallback=function(a){var b="![]("+a+")";j.codemirror.replaceSelection(b),$(h).modal("hide")},$(h).find("iframe").attr("src",g),$(h).modal("show")}),f&&j.codemirror.on("drop",function(b,c){var d=c.dataTransfer.files||c.target.files;if(d&&(c.preventDefault(),c.stopPropagation(),a(d[0]))){var e=new FormData;e.append("__RequestVerificationToken",i),e.append(d[0].name,d[0]),$.ajax({type:"POST",processData:!1,contentType:!1,dataType:"json",url:f,data:e,success:function(a){if(a[0].resizedUrl){var c="[![]("+a[0].resizedUrl+")]("+a[0].originalUrl+")";b.replaceSelection(c)}else{var c="![]("+a[0].originalUrl+")";b.replaceSelection(c)}}})}})})});