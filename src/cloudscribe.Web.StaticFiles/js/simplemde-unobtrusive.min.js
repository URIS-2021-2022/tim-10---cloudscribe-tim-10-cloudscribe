$(function(){function a(a){switch(a.type){case"image/jpeg":case"image/jpg":case"image/gif":case"image/png":case"image/svg+xml":return!0}return!1}var e=$("textarea[data-markdown-unobtrusive]")
e&&e.each(function(e,n){var t={}
t.element=n,t.autoDownloadFontAwesome=$(n).data("markdown-autoDownloadFontAwesome")
var o={}
o.enabled=$(n).data("markdown-autosave")||"false",o.uniqueId=$(n).data("markdown-contentid"),t.autosave=o,t.forceSync=$(n).data("markdown-forceSync")||"false",t.indentWithTabs=$(n).data("markdown-indentWithTabs")||"true",t.spellChecker=$(n).data("markdown-spellChecker")||"true"
var r=$(n).data("markdown-dropfileuploadurl"),i=$(n).data("markdown-filebrowseurl"),d=$(n).data("markdown-filemodalid"),l=$('[name="__RequestVerificationToken"]:first').val(),c=new SimpleMDE(t),s=c.toolbar[9]
s&&i&&d&&(s.action=function(a){window.FileSelectCallback=function(a){var e="![]("+a+")"
c.codemirror.replaceSelection(e),$(d).modal("hide")},$(d).find("iframe").attr("src",i),$(d).modal("show")}),r&&c.codemirror.on("drop",function(e,n){var t=n.dataTransfer.files||n.target.files
if(t&&(n.preventDefault(),n.stopPropagation(),a(t[0]))){var o=new FormData
o.append("__RequestVerificationToken",l),o.append(t[0].name,t[0]),$.ajax({type:"POST",processData:!1,contentType:!1,dataType:"json",url:r,data:o,success:function(a){if(a[0].resizedUrl){var n="[![]("+a[0].resizedUrl+")]("+a[0].originalUrl+")"
e.replaceSelection(n)}}})}})})})
