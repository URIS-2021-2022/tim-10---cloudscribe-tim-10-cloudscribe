var roleSelector = {
    modalId: "roledialog", modalSelector: "#roledialog", targetSelector: "#hdnSelected", labelSelector: "#selectedRoles", prepareModal: function (e, o, l) {
        this.modalId = l ? l : "roledialog", this.modalSelector = l ? "#" + l : "#roledialog", this.labelSelector = o ? "#" + o : "#selectedRoles", this.targetSelector = "#" + e
        var t = $("<div/>", { id: this.modalId, "class": "modal fade", tabindex: "-1" })
        $(document.body).append(t), $(this.modalSelector).on("show.bs.modal", function (e) { roleSelector.syncChanges() })
    }, clearModal: function () { $(this.modalSelector).remove() }, openModal: function () {
        var e = $(this.modalSelector)
        e.modal({ show: !0, backdrop: !0 }), e.on("hidden.bs.modal", function () { $(this).removeData("bs.modal"), roleSelector.clearModal() }), roleSelector.bindClose()
    }, bindClose: function () { $(".closeModal").click(function () { $(this).closest(".modal").modal("hide") }) }, syncChanges: function () {
        var e, o = $(roleSelector.targetSelector).val()
        e = o ? o.split(",") : []
        for (var l = 0; l < e.length; l++) {
            var t = e[l]
            $(roleSelector.modalSelector + " input:checkbox[data-rolename='" + t + "']").attr("checked", "checked")
        } $(roleSelector.modalSelector + " input:checkbox").change(function () {
            var o = $(":checkbox:not(checked)").map(function () { return $(this).data("rolename") }).get(), l = $(e).not(o).get()
            e = l
            var t = $(":checkbox:checked").map(function () { return $(this).data("rolename") }).get(), r = roleSelector.uniqueMerge(e, t)
            r.sort()
            var a = r.join(",")
            $(roleSelector.targetSelector).val(a), $(roleSelector.labelSelector).html(a)
        })
    }, uniqueMerge: function (e, o) {
        for (var l = {}, t = [], r = 0; r < e.length; r++) l[e[r]] !== !0 && (l[e[r]] = !0, t[t.length] = e[r])
        for (var r = 0; r < o.length; r++) l[o[r]] !== !0 && (l[o[r]] = !0, t[t.length] = o[r])
        return t
    }
}
